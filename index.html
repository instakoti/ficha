<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Converte planilha para JSON para filtrar linhas em branco
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filtra linhas em branco (linhas onde todas as células estão vazias, nulas ou indefinidas)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heurística para encontrar a linha do cabeçalho ignorando linhas com menos células preenchidas que a próxima linha
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Alternativa
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Converte JSON filtrado de volta para CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Cria uma nova planilha a partir do array de arrays filtrado
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
  <meta name="theme-color" content="#f5f5f5"/>
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="format-detection" content="telephone=no">
  <meta name="msapplication-tap-highlight" content="no">
  <title>Clauss Fitness • Treino Semanal</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet"/>
  <style>
    /* Conteúdo de login.css */
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Mulish:wght@200;300;400;500;600;700;900&family=Public+Sans:wght@100;200;300;400;500;600;700;800;900&display=swap');
    @import url("https://fonts.cdnfonts.com/css/mona-sans");

    :root {
      --bg: #b2b2b2;
      --container-bg: #faf7f7;
      --card-bg: #ffffff;
      --text: #333333;
      --muted: #999999;
      --accent: #FF0000;
      --input-bg: #fff;
      --input-border: #ccc;
      --shadow: 0 8px 24px rgba(0,0,0,0.12);
    }

    @keyframes gradientAnimation {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    @keyframes a-text-scroll {
      0% { transform: translate3d(-100%, 0, 0); }
      100% { transform: translate3d(0%, 0, 0); }
    }

    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      position: relative;
      overflow: hidden;
      color: #f5f5f5;
      font-family: 'Public Sans', sans-serif;
    }

    body::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, #171717, #7e1b18);
      background-size: 100% 100%;
      animation: gradientAnimation 15s infinite;
      z-index: 1;
    }

    .background-text {
      position: absolute;
      top: 10%;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: top;
      justify-content: center;
      z-index: 2;
      pointer-events: none;
    }

    .background-text h2 {
      white-space: nowrap;
      font-size: 3em;
      font-weight: 800;
      opacity: 0.7;
      letter-spacing: 0em;
      animation: a-text-scroll 7s linear infinite;
    }

    .login {
      position: absolute;
      top: 19%;
      left: 0;
      right: 0;
      margin: auto;
      width: 320px;
      height: 400px;
      border-radius: 16px;
      background: #191919aa;
      background: linear-gradient(180deg, #292929aa 0%, #191919cc 50%);
      backdrop-filter: blur(4px);
      box-shadow: inset 0 2px 2px 0 #e7c4a088, inset 0 -2px 2px 0 #0003;
      color: #ccc;
      text-shadow: 1px 1px 3px #333a;
      padding: 24px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      z-index: 10;
    }

    .login h1 {
      font-family: "Mona-Sans", sans-serif;
      font-size: 1.6em;
      color: #e7c4a0; /* Cor específica para o modo light */
      margin: 0;
      text-align: left;
    }

    body.dark-mode .login h1 {
      color: var(--accent);
    }

    .login p {
      font-size: 0.9em;
      font-weight: 500;
      color: #aaa;
      margin: 8px 0 24px 0;
    }

    .login input {
      width: 100%;
      background: #ffffff1a;
      border: 1px solid #ffffff33;
      border-radius: 8px;
      padding: 12px;
      color: #fff;
      font-family: "Mona-Sans", sans-serif;
      font-size: 0.9em;
      margin-bottom: 16px;
    }

    .login input:focus {
      outline: none;
      border-color: #e7c4a0;
      box-shadow: 0 0 0 2px #e7c4a044;
    }

    .login button {
      width: fit-content;
      border-radius: 100px;
      padding: 10px 36px;
      margin-top: 12px;
      background: #fff2;
      border: none;
      color: #fff;
      font-family: "Mona-Sans", sans-serif;
      font-size: 0.9em;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 0 0 1px #fff3, inset 120px 0 100px -100px #000c, 0 0 0 0 #fff1;
      transition: box-shadow 0.4s ease-in-out;
      margin: 12px auto 0; /* Adicione esta linha para centralizar */
    }

    .login button:hover {
      box-shadow: 0 0 0 1px #fff3, inset 200px 0px 100px -100px #000a, -4px 0 8px 2px #fff2;
    }

    .login form {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
    }

    .accents {
      user-select: none;
      pointer-events: none;
      position: absolute;
      left: 0;
      right: 0;
      top: 20%;
      z-index: 1;
    }

    .acc-card {
      width: 330px;
      height: 400px;
      background: #eee1;
      opacity: 0.8;
      position: absolute;
      left: 0;
      right: 0;
      top: 20%;
      margin: auto;
      border-radius: 16px;
      box-shadow: inset 0 2px 2px 0 #e0c9b266, inset 0 -2px 2px 0 #0004;
      backdrop-filter: blur(4px);
      transition: all 0.1s linear;
      transform-origin: 20% 80%;
    }

    .acc-card:nth-child(1) { animation: wobble 18s ease-in-out infinite; }
    .acc-card:nth-child(2) { animation: wobble 22s ease-in-out -6s infinite reverse; }
    .acc-card:nth-child(3) { animation: wobble 26s ease-in-out -18s infinite; }

    .light {
      --bgref: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg id='Layer_1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 487 487'%3E%3Ccircle cx='243' cy='243.5' r='233' style='fill:none; opacity:.1; stroke:%23aaa; stroke-linecap:round; stroke-miterlimit:10; stroke-width:18px;'/%3E%3Ccircle cx='243.5' cy='243.5' r='243' style='fill:none; stroke:%23111; stroke-linecap:round; stroke-miterlimit:10;'/%3E%3Ccircle cx='243' cy='243.5' r='222' style='fill:none; stroke:%23111; stroke-linecap:round; stroke-miterlimit:10;'/%3E%3Cpath d='m10,243.5C10,114.82,114.32,10.5,243,10.5' style='fill:none; stroke:%23ddd; stroke-linecap:round; stroke-miterlimit:10; stroke-width:18px;'/%3E%3C/svg%3E");
      position: absolute;
      left: 0;
      right: calc(0% + 300px);
      top: 264px;
      margin: auto;
      width: 164px;
      height: 164px;
      z-index: -2;
      background-image: var(--bgref);
      animation: rotate360 22s linear infinite;
    }

    .light::before,
    .light::after {
      content: '';
      display: block;
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      bottom: 0;
      margin: auto;
      background-image: var(--bgref);
      filter: blur(3px);
      scale: 1.01;
    }

    .light::after { filter: blur(8px); }

    .light.sm {
      width: 100px;
      height: 100px;
      left: calc(0% + 300px);
      right: 0;
      top: 142px;
      bottom: 0;
      animation: rotate360 18s linear -10s infinite;
    }

    .top-light {
      position: absolute;
      left: 0;
      right: 0;
      top: -42px;
      margin: auto;
      width: 284px;
      height: 6px;
      border-radius: 10px;
      background: #fffef9;
      box-shadow: 0 0px 1px 1px #ffc78e,
                 0 1px 2px 1px #ff942977,
                 0 2px 6px 1px #e98b2d77,
                 0 4px 12px 0px #ff9e3d99,
                 0 12px 20px 12px #ff800044;
    }

    @keyframes rotate360 {
      to { rotate: 360deg; }
    }

    @keyframes wobble {
      0% { transform: translateX(10px) translateY(20px) rotate(-3deg) scale(1); }
      20% { transform: translateX(-44px) translateY(-8px) rotate(6deg) scale(1.02); }
      60% { transform: translateX(32px) translateY(18px) rotate(-8deg) scale(1); }
      80% { transform: translateX(-42px) translateY(-22px) rotate(12deg) scale(0.94); }
      100% { transform: translateX(10px) translateY(20px) rotate(-3deg) scale(1); }
    }

    @media screen and (max-height: 600px) {
      .login { 
        height: fit-content;
      }
      .acc-card { 
        height: 180px !important;
      }
      .login, .accents { 
        top: 30%;
      }
      .accents .light {
        top: 124px;
        bottom: 0;
      }
      .accents .light.sm {
        top: 42px;
      }
    }

    .theme-switch {
      align-self: flex-end;
      margin: 0;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 24px;
    }

    .tgl {
      display: none;
    }

    .tgl + .tgl-btn {
      width: 42px;
      height: 24px;
      background: #ff6347;
      border-radius: 24px;
      position: relative;
      display: inline-block;
      cursor: pointer;
      transition: background 0.3s ease-in-out;
      pointer-events: auto;
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
      padding: 0;
      border: none;
      outline: none;
      margin: 0;
    }

    .tgl + .tgl-btn:before {
      content: '';
      position: absolute;
      left: 2px;
      top: 50%;
      transform: translateY(-50%);
      width: 20px;
      height: 20px;
      background: #fff;
      border-radius: 50%;
      transition: transform 0.2s ease-in-out;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    .tgl:checked + .tgl-btn {
      background: #505052;
    }

    .tgl:checked + .tgl-btn:before {
      transform: translate(18px, -50%);
    }

    @media (hover: none) {
      .tgl + .tgl-btn {
        min-height: 24px;
      }
      
      .theme-switch {
        padding: 8px 4px;
      }
    }

    input {
      width: 80%;
      display: block;
      margin: 0 auto 16px auto;
      background: var(--input-bg);
      border: 1px solid var(--input-border);
      outline: none;
      padding: 10px;
      font-size: 0.9rem;
      color: var(--text);
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,.05);
      transition: box-shadow .3s, border-color .3s;
      font-family: 'Poppins', sans-serif;
    }

    input:focus {
      border-color: var(--accent);
      box-shadow: 0 4px 16px rgba(255,0,0,0.10);
    }

    .btn {
      width: 42px;
      height: 24px;
      padding: 0;
      font-size: 0.75rem;
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      color: #fff;
      background: #ff6347;
      border: none;
      border-radius: 24px;
      box-shadow: 0 2px 6px rgba(0,0,0,.08);
      cursor: pointer;
      transition: background 0.3s ease-in-out;
      margin-top: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .btn:hover {
      background: #32c671;
    }

    body.dark-mode {
      --bg: rgba(0, 0, 0, 0.184);
      --container-bg: #232323;
      --card-bg: #1b1b1b;
      --text: #f5f5f5;
      --muted: #8b8b8b;
      --accent: #FF5252;
      --input-bg: #181818;
      --input-border: #918f8f;
      --shadow: 0 8px 24px rgba(0, 0, 0, 0.32);
      background: linear-gradient(to bottom, var(--bg) 0%, color-mix(in srgb, var(--bg) 90%, black) 100%);
    }

    body.dark-mode .login {
      background: var(--container-bg);
      box-shadow: var(--shadow);
    }

    body.dark-mode input {
      background: var(--input-bg);
      color: var(--text);
      border: 1px solid var(--input-border);
    }

    body.dark-mode .btn {
      background: var(--accent);
    }

    body.dark-mode .btn:hover {
      background: #c20000;
    }

    .card {
      position: relative;
      width: 315px;
      border-radius: 1em;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      color: #f9f9f9;
      display: flex;
      flex-direction: column;
      background: linear-gradient(45deg, #171717, #7e1b18);
      background-size: 200% 200%;
      animation: gradientAnimation 15s infinite;
    }

    .card-header {
      margin: 0px 0;
      padding: 20px 20px 0 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .card-lable-container {
      height: 230px;
      border: 0px solid black;
      margin: 30px 0;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
    }

    .card-lable-container h2 {
      white-space: nowrap;
      pointer-events: none;
      font-size: 14em;
      font-weight: 800;
      flex-shrink: 0;
      padding: 0 20px;
      opacity: 0.35;
      width: max-content;
      display: flex;
      align-items: center;
      transition: opacity 1000ms ease-in-out;
      transform: translateX(0);
      animation: a-text-scroll 35s linear infinite;
    }

    .card:hover .card-lable-container h2 {
      opacity: 0.75;
    }

    .card:hover .shoe-image {
      transform: translate(-5%, -9%) rotate(15deg) scale(1.025);
    }

    .nike-logo-container {
      position: absolute;
      top: 2%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 3;
    }

    .nike-logo {
      width: 40px;
      user-select: none;
    }

    /* Estilos inline de index.html (primeiro conjunto) */
    @import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;800&display=swap");

    :root {
      --bg: #e5e5e541;
      --container-bg: #f5f5f5;
      --card-bg: #ffffff;
      --text: #333333;
      --muted: #999999;
      --accent: #FF0000;
      --check: #32C671;
      --clr-1: #00c2ff;
      --clr-2: #33ff8c;
      --clr-3: #ffc640;
      --clr-4: #e54cff;
      --blur: 1rem;
      --header-height: 0px;
      --progress-level-1: #4f46e5;
      --progress-level-2: #10b981;
      --progress-level-3: #8b5cf6;
      --progress-level-4: #ffd700;
    }

    .dark-mode {
      --bg: #0a0a0a;
      --container-bg: #121212;
      --card-bg: #181818;
      --text: #f0f0f0;
      --muted: #666666;
      --accent: rgb(255, 99, 71);
    }

    body {
      background: linear-gradient(45deg, #171717, #7e1b18);
      background-size: 200% 200%;
      animation: gradientAnimation 15s infinite;
      color: #757575;
      font-family: 'Poppins', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      height: auto;
      overflow-x: hidden;
      position: relative;
    }

    .header-container, .task, .insights, .day-btn {
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      width: 100%;
      height: 100%;
      overflow-x: hidden;
      margin: 0;
      padding: 0;
      overflow-y: auto !important;
    }

    .header-container {
      position: fixed !important;
      top: 40px !important;
      left: 50% !important;
      transform: translateX(-50%) !important;
      width: 100%;
      max-width: 400px;
      padding: 8px 16px 8px 16px !important;
      margin: 0 auto;
      z-index: 2000 !important;
      background: var(--container-bg) !important;
      filter: none !important; /* Removido o filter que estava causando o corte */
      height: auto;
      border-radius: 16px !important;
      overflow: visible !important;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important; /* Substituído filter por box-shadow */
    }

    .tasks {
      position: fixed;
      top: var(--header-height);
      top: 220px !important;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 400px;
      height: calc(100vh - var(--header-height));
      padding: 0 16px;
      overflow-y: auto;
      overflow-x: hidden;
      z-index: 10;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
      transform-origin: top center;
      pointer-events: all !important;
    }

    .tasks.visible {
      opacity: 1;
      visibility: visible;
    }

    .tasks-wrapper {
      width: 100%;
      position: relative;
      padding: 12px 0;
      overflow: hidden;
      margin: 0 auto;
    }

    .container::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: 0;
      width: 100%;
      height: 16px;
      pointer-events: none;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      border-bottom-left-radius: 16px;
      border-bottom-right-radius: 16px;
      z-index: 2;
    }

    header {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 0;
      padding-top: 0;
      overflow: visible;
      pointer-events: none;
    }

    .date {
      font-size: 1.2rem;
      font-weight: 600;
      text-transform: capitalize;
      margin: 0;
      pointer-events: none;
      color: var(--text);
    }

    .insights {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--card-bg);
      border-radius: 12px;
      padding: 16px;
      margin-top: 4px;
      margin-bottom: 8px;
      height: auto;
      min-height: 88px;
      flex-shrink: 0;
      flex-grow: 0;
      cursor: pointer;
      transition: transform 0.3s ease;
      pointer-events: auto;
    }

    .insights:hover {
      transform: scale(0.98);
    }

    nav {
      width: 100%;
      display: flex !important;
      flex-direction: row !important;
      gap: 8px !important;
      padding: 0 4px;
      margin-top: 8px;
      margin-bottom: 8px;
      overflow: visible !important; /* Alterado para visible */
      position: relative;
      z-index: 2100 !important;
    }

    nav::-webkit-scrollbar {
      display: none;
    }

    .day-btn {
      text-align: center;
      padding: 8px 16px;
      background: var(--card-bg);
      border-radius: 12px !important;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      transition: all .3s ease;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      min-width: fit-content;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: all !important;
      z-index: 2200 !important;
      position: relative;
      border: none !important;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15) !important; /* Sombra mais pronunciada e para baixo */
      flex: 1;
      flex-basis: 0;
      min-width: 0;
      transform: translateZ(0); /* Força o hardware acceleration */
      -webkit-transform: translateZ(0);
      will-change: transform;
    }

    /* Adicione o efeito hover para melhorar o feedback visual */
    .day-btn:hover {
      transform: translateY(-1px) translateZ(0);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2) !important;
    }

    /* Estilo quando o botão está ativo */
    .day-btn.active {
      background: var(--accent);
      color: #fff;
      box-shadow: 0 4px 12px rgba(255, 0, 0, 0.2) !important;
    }

    @media screen and (max-width: 360px) {
      nav {
        gap: 4px !important;
      }
      
      .day-btn {
        padding: 8px 12px;
        font-size: 0.8rem;
      }
    }

    .task {
      width: 100%;
      background: var(--card-bg);
      border-radius: 12px;
      display: flex;
      align-items: flex-start;
      padding: 16px 16px 16px 40px;
      margin: 12px 0;
      cursor: pointer;
      position: relative;
      color: var(--text);
      box-shadow: var(--shadow);
      transition: transform 0.5s cubic-bezier(0.2, 0.8, 0.2, 1), 
                  opacity 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);         
    }

    .task.cardio-task {
      margin-top: 24px !important;
      margin-bottom: 24px !important;
      border-left: 4px solid var(--accent);
      border-right: 4px solid var(--accent);
    }

    .task:first-child {
      margin-top: 0;
    }

    .task:last-child {
      margin-bottom: 0;
    }

    .task::before {
      content: "✓";
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--check);
      font-size: 16px;
      opacity: 0;
      transition: opacity .3s ease;
    }

    .task.done {
      color: var(--muted);
      box-shadow: inset 0 2px 4px rgba(0,0,0,.1);
      background: var(--bg);
    }

    .task.done::before {
      opacity: 1;
    }

    .task.done .details {
      opacity: 0.5;
    }

    .task.slide-left {
      transform: translateX(-100px) scale(0.9);
      opacity: 0;
      z-index: 1;
    }

    @keyframes clean-task {
      0% { transform: translateY(0); opacity: 1; }
      100% { transform: translateY(-100%); opacity: 0; }
    }

    .task.cleaning {
      animation: clean-task 0.3s ease forwards;
    }

    .greeting {
      display: flex;
      flex-direction: column;
      width: 75%;
      flex-shrink: 0;
    }

    .greeting-title-row {
      display: flex;
      align-items: center;
      gap: 4px;
      font-size: 1.2rem;
      font-weight: 600;
      white-space: nowrap;
    }

    .greeting-title {
      font-size: 1.2rem;
      font-weight: 600;
      flex-shrink: 0;
      color: var(--text);
    }

    .greeting-subtitle {
      font-size: 0.9rem;
      color: var(--muted);
    }

    .aurora-word {
      position: relative;
      display: inline-block;
      font-size: 1.2rem;
      font-weight: 800;
      font-family: 'Inter', sans-serif;
      line-height: 1.2;
      color: var(--text);
      flex-shrink: 0;
    }

    .circular-progress {
      --size: 48px;
      --stroke-width: 8;
      --primary: #4f46e5;
      --secondary: #e5e7eb;
      width: var(--size);
      height: var(--size);
      position: relative;
      flex-shrink: 0;
      margin-left: auto;
      pointer-events: none;
    }

    .circular-progress svg {
      width: 100%;
      height: 100%;
      transform: rotate(-90deg);
    }

    .circular-progress circle {
      fill: none;
      stroke-width: var(--stroke-width);
      stroke-linecap: round;
      transition: stroke-dasharray 0.8s ease, stroke 0.8s ease;
    }

    .circular-progress .bg {
      stroke: var(--secondary);
    }

    .circular-progress .progress {
      stroke: var(--primary);
      stroke-dasharray: 0 283;
    }

    .circular-progress .value {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: calc(var(--size) / 7);
      font-weight: 600;
      color: var(--text);
    }

    .days-container {
      display: grid !important;
      grid-template-columns: repeat(5, 1fr) !important;
      gap: 8px !important;
      width: 100% !important;
    }

    .days-container .day-button {
      margin: 0 !important;
    }

    .info {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .name {
      flex: 1;
      margin-bottom: 4px;
    }

    .details {
      font-size: .75rem;
      color: var(--muted);
      text-align: right;
    }

    .controls {
      display: flex;
      gap: 20px;
      align-items: center;
      height: 24px;
      z-index: 2050;
      pointer-events: none;
      margin: 0;
      padding: 0;
    }

    .controls > * {
      pointer-events: auto;
    }

    .button {
      --b: #275EFE;
      --b-h: #1D4FE1;
      display: flex;
      align-items: center;
      gap: 1px;
      padding: 0;
      border: 0;
      border-radius: 5px;
      font-size: 10px;
      font-weight: 600;
      background: var(--b);
      color: #fff;
      cursor: pointer;
      position: relative;
      margin: auto 0;
      width: 36px;
      height: 24px;
      overflow: hidden;
      contain: strict;
      pointer-events: auto;
    }

    .button:hover {
      background: var(--b-h);
    }

    .button:active {
      transform: scale(.7);
    }

    .button .icon {
      width: 0px;
      height: 0px;
      position: relative;
    }

    #content-spacer {
      display: none !important;
    }

    body[data-treino="Segunda"] .tasks,
    body[data-treino="Terça"] .tasks,
    body[data-treino="Quarta"] .tasks,
    body[data-treino="Quinta"] .tasks,
    body[data-treino="Sexta"] .tasks {
      margin-bottom: 0;
      padding-bottom: 80px;
      overflow-y: auto;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    body[data-treino="Segunda"] .tasks::-webkit-scrollbar,
    body[data-treino="Terça"] .tasks::-webkit-scrollbar,
    body[data-treino="Quarta"] .tasks::-webkit-scrollbar,
    body[data-treino="Quinta"] .tasks::-webkit-scrollbar,
    body[data-treino="Sexta"] .tasks::-webkit-scrollbar {
      display: none;
    }

    @media screen and (max-width: 400px) {
      .header-container {
        padding: 8px 12px !important;
      }
      
      .task {
        padding: 10px 12px 10px 36px;
      }

      .controls {
        gap: 12px;
      }

      .theme-switch {
        height: 24px;
        margin-right: -4px;
      }

      .tgl + .tgl-btn {
        width: 38px;
        height: 22px;
      }

      .tgl + .tgl-btn:before {
        width: 18px;
        height: 18px;
      }

      .tgl:checked + .tgl-btn:before {
        transform: translate(16px, -50%);
      }
    }

    @media screen and (max-width: 480px) {
      .tasks {
        width: 100% !important;
        padding-left: 12px !important;
        padding-right: 12px !important;
        overflow-x: hidden;
      }
    }

    body:not(.dark-mode) .insights {
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
      transition: box-shadow 0.3s ease;
    }

    body:not(.dark-mode) .day-btn {
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.10);
      transition: box-shadow 0.3s ease;
    }

    body:not(.dark-mode) .day-btn:hover {
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    }

    .screen.hidden { display: none !important; }
    .screen.visible { display: block !important; }

    /* Estilos inline de index.html (segundo conjunto) */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      color: #333;
    }

    .page {
      display: none;
      padding: 20px;
    }

    .page.active {
      display: block;
    }
  </style>
</head>
<body>
  <!-- Tela de Login -->
  <section id="indexPage" class="page active">
    <div class="accents">
      <div class="acc-card"></div>
      <div class="acc-card"></div>
      <div class="acc-card"></div>
      <div class="light"></div>
      <div class="light sm"></div>
      <div class="top-light"></div>
    </div>
    
    <div class="login">
      <div class="theme-switch">
        <input type="checkbox" id="theme-toggle" class="tgl">
        <label for="theme-toggle" class="tgl-btn"></label>
      </div>
      <h1 style="text-align: center; width: 100%;">Claus Vision</h1>
      <p>Entrar aqui é iniciar uma nova forma de se acompanhar.</p>
      <form id="loginForm" onsubmit="return validateLogin()">
        <input type="password" name="p" placeholder="Somente convidados" required>
        <button type="submit" class="btn">Entrar</button>
      </form>
    </div>
  </section>

  <!-- Tela de Treino -->
  <section id="main-app" class="screen hidden">
    <div class="header-container">
      <header>
        <div class="date" id="current-date"></div>
        <div class="controls">
          <button id="reset-btn" class="button">
            <div class="icon"><svg class="top"><use href="#top"/></svg><svg class="bottom"><use href="#bottom"/></svg></div>
            <div class="text">Limpar</div>
          </button>
          <div class="theme-switch">
            <input type="checkbox" id="theme-toggle-exercise" class="tgl">
            <label for="theme-toggle-exercise" class="tgl-btn"></label>
          </div>
        </div>
      </header>

      <section class="insights">
        <div class="greeting">
          <div class="greeting-title-row">
            <span class="greeting-title">Oi,</span>
            <span class="aurora-word">Claudius</span>
          </div>
          <div class="greeting-subtitle">Bom treino!</div>
        </div>
        <div id="progress" class="circular-progress" data-level="1" 
             style="--primary:#4f46e5; --secondary:var(--muted);">
          <svg viewBox="0 0 100 100">
            <circle class="bg" cx="50" cy="50" r="45"></circle>
            <circle class="progress" cx="50" cy="50" r="45"></circle>
          </svg>
          <span class="value">0xp</span>
        </div>
      </section>

      <nav id="nav-days"></nav>
    </div>

    <section class="tasks" id="task-list"></section>
  </section>

  <!-- Dependências externas -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

  <!-- Script de manipulação de arquivos -->
  <script type="text/javascript">
    var gk_isXlsx = false;
    var gk_xlsxFileLookup = {};
    var gk_fileData = {};
    function filledCell(cell) {
      return cell !== '' && cell != null;
    }
    function loadFileData(filename) {
      if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
        try {
          var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
          var firstSheetName = workbook.SheetNames[0];
          var worksheet = workbook.Sheets[firstSheetName];
          // Converte planilha para JSON para filtrar linhas em branco
          var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
          // Filtra linhas em branco (linhas onde todas as células estão vazias, nulas ou indefinidas)
          var filteredData = jsonData.filter(row => row.some(filledCell));
          // Heurística para encontrar a linha do cabeçalho ignorando linhas com menos células preenchidas que a próxima linha
          var headerRowIndex = filteredData.findIndex((row, index) =>
            row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
          );
          // Alternativa
          if (headerRowIndex === -1 || headerRowIndex > 25) {
            headerRowIndex = 0;
          }
          // Converte JSON filtrado de volta para CSV
          var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex));
          csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
          return csv;
        } catch (e) {
          console.error(e);
          return "";
        }
      }
      return gk_fileData[filename] || "";
    }
  </script>

  <!-- Script de validação do login -->
  <script>
    const USERS = {
      '123': {
        name: 'Claudius',
        type: 'weekly',
        tasks: {
          'Segunda': [
            { name:'Supino Reto Barra', sets:4, reps:'8-10', rest:'90s' },
            { name:'Supino Inclinado Halteres', sets:3, reps:'10-12', rest:'60s' },
            { name:'Crucifixo ou Crossover (drop)', sets:3, reps:'12-15', rest:'60s' },
            { name:'Paralelas ou Supino Fechado', sets:3, reps:'10-12', rest:'60-90s' },
            { name:'Extensão Tríceps Polia', sets:3, reps:'12-15', rest:'60s' },
            { name:'Prancha (opcional)', sets:3, reps:'30-45s', rest:'30s' }
          ],
          'Terça': [
            { name:'Barra fixa ou Pulldown', sets:4, reps:'6-10', rest:'90s' },
            { name:'Remada Curvada Barra/Haltere', sets:3, reps:'8-10', rest:'90s' },
            { name:'Remada Baixa Polia', sets:3, reps:'10-12', rest:'60s' },
            { name:'Levant. Terra (opcional)', sets:3, reps:'8', rest:'120s' },
            { name:'Rosca Direta Barra (drop)', sets:3, reps:'10-12', rest:'60s' },
            { name:'Rosca Martelo Halteres', sets:3, reps:'12', rest:'60s' },
            { name:'Rosca Concentrada/Scott', sets:2, reps:'15', rest:'45s' }
          ],
          'Quarta': [
            { name:'Agachamento Livre', sets:4, reps:'8-10', rest:'120s' },
            { name:'Leg Press 45°', sets:3, reps:'10-12', rest:'90s' },
            { name:'Cadeira Extensora (drop)', sets:3, reps:'12-15', rest:'60s' },
            { name:'Mesa Flexora', sets:3, reps:'10-12', rest:'60s' },
            { name:'Stiff', sets:3, reps:'10', rest:'90s' },
            { name:'Panturrilha em Pé', sets:4, reps:'15', rest:'60s' },
            { name:'Abdômen', sets:3, reps:'15', rest:'30s' }
          ],
          'Quinta': [
            { name:'Desenvolvimento Militar', sets:4, reps:'8-10', rest:'90s' },
            { name:'Elevação Lateral', sets:3, reps:'12', rest:'60s' },
            { name:'Elevação Frontal', sets:2, reps:'12-15', rest:'45s' },
            { name:'Posterior de Ombro', sets:3, reps:'12-15', rest:'60s' },
            { name:'Encolhimento', sets:3, reps:'12', rest:'60s' },
            { name:'Abs: Crunch+Elevação', sets:3, reps:'15-20+15', rest:'30s' },
            { name:'Prancha Lateral', sets:2, reps:'30s cada', rest:'30s' }
          ],
          'Sexta': [
            { name:'Burpee com Flexão', sets:4, reps:'10', rest:'Sem pausa' },
            { name:'Kettlebell Swing', sets:4, reps:'15', rest:'Sem pausa' },
            { name:'Remada Curvada', sets:4, reps:'12', rest:'Sem pausa' },
            { name:'Afundos', sets:4, reps:'10 cada', rest:'Sem pausa' },
            { name:'Prancha', sets:4, reps:'30s', rest:'1-2 min' }
          ]
        }
      },
      '456': {
        name: 'Matheus',
        type: 'groups',
        tasks: {
          'Treino A': [
            {name:'Pulley frente aberto pronado',sets:5,reps:'20-15-12-10-10',rest:'60"'},
            {name:'Remada baixa fechada neutra',sets:4,reps:'10',rest:'60"'},
            {name:'Serrote com halteres',sets:3,reps:'8-8-8',rest:'90"'},
            {name:'Pulldown com corda no cross',sets:4,reps:'12-10-10-8',rest:'60"'},
            {name:'Rosca direta com barra W',sets:4,reps:'15-12-10-8',rest:'60"'},
            {name:'Rosca martelo unilateral com halteres',sets:3,reps:'12',rest:'60"'},
            {name:'Crucifixo inverso no voador',sets:5,reps:'20-15-12-10-8',rest:'60"'},
            {name:'Abdominal infra na paralela',sets:5,reps:'15',rest:'60"'}
          ],
          'Treino B': [
            {name:'Agachamento no smith',sets:4,reps:'15-12-10-8',rest:'90"'},
            {name:'Leg Press 45º',sets:4,reps:'12-10-8-8',rest:'60"'},
            {name:'Banco extensor',sets:4,reps:'12-10-8-8',rest:'60"'},
            {name:'Banco Adutor',sets:5,reps:'15-15-12-10-10',rest:'60"'},
            {name:'Panturrilha no Leg Horizontal',sets:5,reps:'15',rest:'60"'},
            {name:'Panturrilha em pé',sets:5,reps:'15',rest:'60"'}
          ],
          'Treino C': [
            {name:'Crucifixo no Cross Over',sets:4,reps:'15-12-12-10',rest:'60"'},
            {name:'Supino 30° no Smith (ou supino inclinado)',sets:4,reps:'10',rest:'60"'},
            {name:'Supino reto com halteres',sets:4,reps:'12-10-10-8',rest:'60"'},
            {name:'Supino canadense com barra',sets:5,reps:'15-12-10-8',rest:'60"'},
            {name:'Elevação lateral com halteres',sets:3,reps:'12',rest:'60"'},
            {name:'Desenvolvimento máquina',sets:3,reps:'15',rest:'60"'},
            {name:'Tríceps com corda',sets:4,reps:'15-12-10-8',rest:'60"'},
            {name:'Tríceps no Cross Over',sets:4,reps:'12-12-10-10',rest:'60"'},
            {name:'Abdominal infra na paralela',sets:5,reps:'15',rest:'60"'}
          ],
          'Treino D': [
            {name:'Cadeira flexora',sets:5,reps:'20-15-12-10-10',rest:'60"'},
            {name:'Mesa flexora',sets:4,reps:'12',rest:'60"'},
            {name:'Stiff com barra',sets:4,reps:'15-12-10-10',rest:'60"'},
            {name:'Elevação pélvica na máquina',sets:4,reps:'15-12-12-10',rest:'60"'},
            {name:'Banco abdutor',sets:4,reps:'12',rest:'60"'},
            {name:'Panturrilha em pé',sets:4,reps:'12',rest:'60"'},
            {name:'Panturrilha sentada',sets:5,reps:'15',rest:'60"'}
          ]
        }
      }
    };

    document.addEventListener('DOMContentLoaded', () => {
      const loginForm = document.getElementById('loginForm');
      const indexPage = document.getElementById('indexPage');
      const mainApp = document.getElementById('main-app');
      const correctPassword = '123';

      if (!loginForm || !indexPage || !mainApp) {
        console.error('Elementos não encontrados:', { loginForm, indexPage, mainApp });
        return;
      }

      loginForm.addEventListener('submit', (event) => {
        event.preventDefault();
        
        const passwordInput = loginForm.querySelector('input[name="p"]');
        const password = passwordInput.value;
        
        const user = USERS[password];
        
        if (user) {
          // Atualiza o nome do usuário na tela
          document.querySelector('.aurora-word').textContent = user.name;
          
          // Carrega os exercícios do usuário
          data = safeGet(`workoutData_${password}`, JSON.parse(JSON.stringify(user.tasks)));
          
          // Armazena o usuário atual
          localStorage.setItem('currentUser', password);
          
          indexPage.classList.remove('active');
          mainApp.classList.remove('hidden');
          mainApp.classList.add('visible');
          
          currentDay = localStorage.getItem('currentDay') || 'Segunda';
          save();
          render();
        } else {
          alert('Senha incorreta! Tente novamente.');
        }
      });

      const headerContainer = document.querySelector('.header-container');
      const header = document.querySelector('header');
      const controls = document.querySelector('.controls');

      if (headerContainer) {
        headerContainer.onclick = (e) => e.stopPropagation();
        headerContainer.ontouchstart = (e) => {
          e.stopPropagation();
          e.preventDefault();
        };
      }

      if (header) {
        header.onclick = (e) => e.stopPropagation();
        header.ontouchstart = (e) => {
          e.stopPropagation();
          e.preventDefault();
        };
      }

      if (controls) {
        controls.onclick = (e) => e.stopPropagation();
        controls.ontouchstart = (e) => {
          e.stopPropagation();
          e.preventDefault();
        };
      }
    });
  </script>

  <!-- Script da página de treino -->
  <script>
    const safeGet=(k,d)=>{try{return JSON.parse(localStorage.getItem(k))||d}catch{return d}}
    const safeSet=(k,v)=>{try{localStorage.setItem(k,JSON.stringify(v))}catch{}}

    const CARDIOS = {
      'Segunda': '🔥 HIIT na esteira (20 min pós-treino)',
      'Terça'  : '🚴 Moderado contínuo (20 min pós-treino)',
      'Quarta': '🚴 Moderado (leve, 20 min pós-treino)',
      'Quinta': '🔥 HIIT bike/elíptico (20 min pós-treino)',
      'Sexta'  : '✅ Incluído no circuito (não precisa adicional)'
    };

    const defaultUser = USERS['123']; // Usuário padrão Claudius
    let data = safeGet('workoutData', JSON.parse(JSON.stringify(defaultUser.tasks)));
    let currentDay = (data[localStorage.getItem('currentDay')] ? localStorage.getItem('currentDay') : 'Segunda');
    let isDark = localStorage.getItem('theme')==='dark';

    const navEl=document.getElementById('nav-days'),
          listEl=document.getElementById('task-list'),
          toggle=document.getElementById('theme-toggle'),
          toggleExercise=document.getElementById('theme-toggle-exercise'),
          resetBtn=document.getElementById('reset-btn'),
          container=document.querySelector('.header-container')

    document.getElementById('current-date').textContent=new Date().toLocaleDateString('pt-BR',{weekday:'long',day:'numeric',month:'long'})
    if(isDark) document.body.classList.add('dark-mode');
    if(toggle) toggle.checked=isDark;
    if(toggleExercise) toggleExercise.checked=isDark;
    resetBtn.querySelector('.text').innerHTML='<span>'+[...resetBtn.querySelector('.text').textContent.trim()].join('</span><span>')+'</span>'

    const save=()=>{
      safeSet('workoutData',data);
      localStorage.setItem('currentDay',currentDay);
      localStorage.setItem('theme',isDark?'dark':'light');
    }

    let completedGroups = 0;
    function initCompletedGroups() {
      completedGroups = 0;
      for (const day of getDays(defaultUser)) {
        const tasks = data[day.key] || [];
        if (tasks.length > 0 && tasks.every(t => t.done)) {
          completedGroups++;
        }
      }
    }
    initCompletedGroups();

    function calculateTotalProgress() {
      let totalTasks = 0;
      let totalCompleted = 0;
      
      const currentUser = USERS[localStorage.getItem('currentUser')] || defaultUser;
      const userDays = getDays(currentUser);
      
      for (const day of userDays) {
        const tasks = data[day.key] || [];
        if (currentUser.type === 'groups') {
          // Ajuste especial para treinos em grupo - valor maior por exercício
          totalTasks += tasks.length;
          totalCompleted += tasks.filter(t => t.done).length;
        } else {
          totalTasks += tasks.length;
          totalCompleted += tasks.filter(t => t.done).length;
        }
      }
      
      // Multiplica o XP baseado no tipo de treino
      if (currentUser.type === 'groups') {
        totalCompleted *= 1.2; // 20% mais XP para treinos em grupo
        totalTasks *= 1.2;
      }
      
      return { totalTasks, totalCompleted };
    }

    function renderProgress() {
      const progressEl = document.getElementById('progress');
      
      if (!progressEl) return;
      
      const { totalTasks, totalCompleted } = calculateTotalProgress();
      
      if (totalTasks === 0) {
        setCircularProgress(progressEl, 0);
        return;
      }
      
      const valuePerTask = 400 / totalTasks;
      const currentValue = totalCompleted * valuePerTask;
      
      setCircularProgress(progressEl, currentValue);
    }

    function getDays(user) {
      if (user.type === 'weekly') {
        return [
          { key: 'Segunda', label: 'SEGUNDA' },
          { key: 'Terça',  label: 'TERÇA'  },
          { key: 'Quarta', label: 'QUARTA' },
          { key: 'Quinta', label: 'QUINTA' },
          { key: 'Sexta',  label: 'SEXTA'  }
        ];
      } else if (user.type === 'groups') {
        return [
          { key: 'Treino A', label: 'TREINO A' },
          { key: 'Treino B', label: 'TREINO B' },
          { key: 'Treino C', label: 'TREINO C' },
          { key: 'Treino D', label: 'TREINO D' }
        ];
      }
    }

    function renderNav() {
      if (!navEl) return;
      
      navEl.innerHTML = '';
      
      const currentUser = USERS[localStorage.getItem('currentUser')] || defaultUser;
      const userDays = getDays(currentUser);
      
      for (const d of userDays) {
        const tasks = data[d.key] || [];
        const btn = document.createElement('div');
        
        btn.className = `day-btn${d.key === currentDay ? ' active' : ''}${tasks.every(t => t.done) ? ' done' : ''}`;
        btn.textContent = d.label;
        
        const handleClick = (e) => {
          e.stopPropagation();
          e.preventDefault();
          console.log(`Botão de ${d.key} clicado`);
          const tasksArea = document.querySelector('.tasks');
          
          document.querySelectorAll('.day-btn').forEach(btn => btn.classList.remove('active'));
          btn.classList.add('active');
          
          currentDay = d.key;
          save();
          render();
          
          if (tasksArea) {
            tasksArea.classList.add('visible');
          }
        };
        
        btn.addEventListener('click', handleClick);
        btn.addEventListener('touchstart', handleClick, { passive: false });
        
        navEl.appendChild(btn);
      }
    }

    function renderTasks() {
      if (!listEl) {
        console.error("Elemento de lista não encontrado");
        return;
      }
      
      listEl.innerHTML = '';
      
      const tasks = data[currentDay] || [];
      console.log("Renderizando tarefas para:", currentDay, "Total:", tasks.length);
      
      const tasksWrapper = document.createElement('div');
      tasksWrapper.className = 'tasks-wrapper';
      tasksWrapper.style.width = '100%';
      tasksWrapper.style.position = 'relative';
      listEl.appendChild(tasksWrapper);
      
      if (tasks.length === 0) {
        // Pegar o usuário atual
        const currentUserId = localStorage.getItem('currentUser');
        const currentUser = USERS[currentUserId];
        
        // Se não houver tarefas, recarregue do template original
        if (currentUser) {
          data[currentDay] = JSON.parse(JSON.stringify(currentUser.tasks[currentDay]));
          save();
          // Chama renderTasks novamente com os dados atualizados
          renderTasks();
          return;
        }
      }
      
      const taskElements = [];
      
      tasks.forEach((t, index) => {
        const task = document.createElement('div');
        task.className = `task${t.done ? ' done' : ''}`;
        task.setAttribute('data-index', index);
        
        // ...existing code para criar o elemento task...
        
        task.innerHTML = `
          <div class="info">
            <div class="name">${t.name}</div>
            <div class="details">${t.sets}× · ${t.reps} · descanso ${t.rest}</div>
          </div>
        `;
        
        tasksWrapper.appendChild(task);
        taskElements.push(task);
        
        task.onclick = function() {
          const isDone = !t.done;
          t.done = isDone;
          
          if (isDone) {
            const thisTaskElement = this;
            const thisIndex = parseInt(thisTaskElement.getAttribute('data-index'));
            
            thisTaskElement.classList.add('slide-left');
            
            let itemsBelow = [];
            taskElements.forEach((el, idx) => {
              if (idx > thisIndex && !el.classList.contains('done')) {
                itemsBelow.push(el);
                setTimeout(() => {
                  el.style.animation = `smoothMoveUp 0.45s cubic-bezier(0.2, 0.8, 0.2, 1) forwards`;
                }, 50 * (idx - thisIndex));
              }
            });
            
            setTimeout(() => {
              itemsBelow.forEach(el => {
                el.style.animation = '';
                el.style.transform = '';
              });
              
              const currentTasks = data[currentDay];
              const taskToMove = currentTasks.splice(thisIndex, 1)[0];
              currentTasks.push(taskToMove);
              
              save();
              render();
            }, 500);
          } else {
            const thisIndex = parseInt(this.getAttribute('data-index'));
            const currentTasks = data[currentDay];
            const taskToMove = currentTasks.splice(thisIndex, 1)[0];
            currentTasks.unshift(taskToMove);
            
            save();
            render();
          }
        };
      });
      
      // Mostrar a área de tarefas
      const tasksArea = document.querySelector('.tasks');
      if (tasksArea && !tasksArea.classList.contains('visible')) {
        tasksArea.classList.add('visible');
      }
      
      const cardioTask = document.createElement('div');
      cardioTask.className = 'task cardio-task';
      cardioTask.style.borderLeft = '4px solid var(--accent)';
      cardioTask.style.borderRight = '4px solid var(--accent)';
      cardioTask.style.marginTop = currentDay === 'Quarta' ? '40px' : '20px';
      cardioTask.style.paddingLeft = '16px';
      
      cardioTask.innerHTML = `
        <div class="info">
          <div class="name" style="font-weight: 600;">Cardio</div>
          <div class="cardio-desc" style="font-size: 0.9rem; color: var(--muted);">${CARDIOS[currentDay]}</div>
        </div>
      `;
      
      cardioTask.style.pointerEvents = 'none';
      
      tasksWrapper.appendChild(cardioTask);
      
      const spacer = document.createElement('div');
      spacer.style.height = currentDay === 'Quarta' ? '30px' : '20px';
      spacer.style.width = '100%';
      spacer.style.clear = 'both';
      listEl.appendChild(spacer);
    }

    function updateLayout() {
      const headerContainer = document.querySelector('.header-container');
      if (headerContainer) {
        const height = headerContainer.getBoundingClientRect().height;
        document.documentElement.style.setProperty('--header-height', `${height}px`);
      }
    }

    function render() {
      const insightsBlock = document.querySelector('.insights');
      if (insightsBlock) {
        insightsBlock.style.minHeight = '88px';
        insightsBlock.style.flexShrink = '0';
      }
      
      document.body.setAttribute('data-treino', currentDay);
      
      renderNav();
      renderTasks();
      renderProgress();
      updateLayout();
      
      const container = document.querySelector('.header-container');
      const tasksArea = document.querySelector('.tasks');
      
      if (container && tasksArea) {
        container.style.position = 'fixed';
        container.style.top = '0';
        container.style.zIndex = '1000';
        
        const containerHeight = container.offsetHeight || 220;
        
        tasksArea.style.top = containerHeight + 'px';
        tasksArea.style.maxWidth = '400px';
        tasksArea.style.left = '50%';
        tasksArea.style.transform = 'translateX(-50%)';
        tasksArea.style.overflowY = 'auto';
        tasksArea.style.height = `calc(100vh - ${containerHeight}px)`;
        tasksArea.style.webkitOverflowScrolling = 'touch';
        tasksArea.style.display = 'block';
        tasksArea.style.zIndex = '10';

        if (!currentDay) {
          tasksArea.classList.remove('visible');
        }
      }
    }

    window.addEventListener('load', function() {
      const tasksArea = document.querySelector('.tasks');
      if (tasksArea) {
        tasksArea.classList.remove('visible');
        setTimeout(() => {
          tasksArea.classList.add('visible');
        }, 300);
      }
      
      updateLayout();
      render();
    });

    window.addEventListener('resize', function() {
      updateLayout();
    });

    render();
    save();

    document.getElementById('progress').style.pointerEvents = 'none';

    resetBtn.onclick = e => {
      e.stopPropagation();
      e.preventDefault();
      console.log('Botão Limpar clicado');
      if (resetBtn.classList.contains('delete')) return;
      resetBtn.classList.add('delete');

      const tasks = document.querySelectorAll('.task');
      const tasksArea = document.querySelector('.tasks');
      
      tasks.forEach((task, index) => {
        setTimeout(() => {
          task.classList.add('cleaning');
        }, index * 50);
      });

      setTimeout(() => {
        listEl.innerHTML = '';
        tasksArea.style.transition = 'none';
        tasksArea.classList.remove('visible');
        void tasksArea.offsetHeight;
        tasksArea.style.transition = '';
        
        // Pegar o usuário atual
        const currentUserId = localStorage.getItem('currentUser');
        const currentUser = USERS[currentUserId];
        
        // Resetar os dados do usuário atual
        data = JSON.parse(JSON.stringify(currentUser.tasks));
        
        completedGroups = 0;
        save();
        
        // Forçar a renderização do dia/treino atual
        if (currentUser.type === 'groups') {
          currentDay = 'Treino A'; // Para usuários com treinos em grupo
        } else {
          currentDay = 'Segunda'; // Para usuários com treinos semanais
        }
        
        render();
        resetBtn.classList.remove('delete');
        
        // Mostrar a lista de exercícios após um pequeno delay
        setTimeout(() => {
          const taskList = document.querySelector('.tasks');
          if (taskList) {
            taskList.classList.add('visible');
          }
          // Força a renderização dos exercícios
          renderTasks();
        }, 300);
      }, (tasks.length * 50) + 300);
    }

    // Atualizando a função renderTasks para garantir que sempre mostre os exercícios
    function renderTasks() {
      if (!listEl) {
        console.error("Elemento de lista não encontrado");
        return;
      }
      
      listEl.innerHTML = '';
      
      const tasks = data[currentDay] || [];
      console.log("Renderizando tarefas para:", currentDay, "Total:", tasks.length);
      
      const tasksWrapper = document.createElement('div');
      tasksWrapper.className = 'tasks-wrapper';
      tasksWrapper.style.width = '100%';
      tasksWrapper.style.position = 'relative';
      listEl.appendChild(tasksWrapper);
      
      if (tasks.length === 0) {
        // Pegar o usuário atual
        const currentUserId = localStorage.getItem('currentUser');
        const currentUser = USERS[currentUserId];
        
        // Se não houver tarefas, recarregue do template original
        if (currentUser) {
          data[currentDay] = JSON.parse(JSON.stringify(currentUser.tasks[currentDay]));
          save();
          // Chama renderTasks novamente com os dados atualizados
          renderTasks();
          return;
        }
      }
      
      const taskElements = [];
      
      tasks.forEach((t, index) => {
        const task = document.createElement('div');
        task.className = `task${t.done ? ' done' : ''}`;
        task.setAttribute('data-index', index);
        
        // ...existing code para criar o elemento task...
        
        task.innerHTML = `
          <div class="info">
            <div class="name">${t.name}</div>
            <div class="details">${t.sets}× · ${t.reps} · descanso ${t.rest}</div>
          </div>
        `;
        
        tasksWrapper.appendChild(task);
        taskElements.push(task);
        
        task.onclick = function() {
          const isDone = !t.done;
          t.done = isDone;
          
          if (isDone) {
            const thisTaskElement = this;
            const thisIndex = parseInt(thisTaskElement.getAttribute('data-index'));
            
            thisTaskElement.classList.add('slide-left');
            
            let itemsBelow = [];
            taskElements.forEach((el, idx) => {
              if (idx > thisIndex && !el.classList.contains('done')) {
                itemsBelow.push(el);
                setTimeout(() => {
                  el.style.animation = `smoothMoveUp 0.45s cubic-bezier(0.2, 0.8, 0.2, 1) forwards`;
                }, 50 * (idx - thisIndex));
              }
            });
            
            setTimeout(() => {
              itemsBelow.forEach(el => {
                el.style.animation = '';
                el.style.transform = '';
              });
              
              const currentTasks = data[currentDay];
              const taskToMove = currentTasks.splice(thisIndex, 1)[0];
              currentTasks.push(taskToMove);
              
              save();
              render();
            }, 500);
          } else {
            const thisIndex = parseInt(this.getAttribute('data-index'));
            const currentTasks = data[currentDay];
            const taskToMove = currentTasks.splice(thisIndex, 1)[0];
            currentTasks.unshift(taskToMove);
            
            save();
            render();
          }
        };
      });
      
      // Mostrar a área de tarefas
      const tasksArea = document.querySelector('.tasks');
      if (tasksArea && !tasksArea.classList.contains('visible')) {
        tasksArea.classList.add('visible');
      }
    }

    function setCircularProgress(container, value, stageSize = 100, totalStages = 4) {
      if (!container) return;
      
      const circle = container.querySelector('.progress');
      const text = container.querySelector('.value');
      
      if (!circle || !text) return;
      
      const r = circle.r.baseVal.value;
      const C = 2 * Math.PI * r;
      const max = stageSize * totalStages;
      const v = Math.min(Math.max(value, 0), max);
      
      const level = Math.min(Math.floor(v / stageSize) + 1, totalStages);
      container.setAttribute('data-level', level);
      
      const colors = {
        1: 'var(--progress-level-1)',
        2: 'var(--progress-level-2)',
        3: 'var(--progress-level-3)',
        4: 'var(--progress-level-4)'
      };
      
      container.style.setProperty('--primary', colors[level]);
      
      let fillPercentage;
      
      if (level < totalStages) {
        fillPercentage = (v % stageSize) / stageSize;
        if (fillPercentage === 0 && v > 0) fillPercentage = 1.0;
      } else {
        fillPercentage = 1.0;
      }
      
      circle.style.strokeDasharray = `${(fillPercentage * C).toFixed(2)} ${C.toFixed(2)}`;
      text.textContent = `${Math.round(v)}xp`;
      
      if (level === 4) {
        text.style.color = colors[4];
      } else {
        text.style.color = 'var(--text)';
      }
      
      const nameElement = document.querySelector('.aurora-word');
      if (nameElement) {
        nameElement.classList.remove('level-4', 'max-xp');
        nameElement.style.transform = 'scale(1)';
        
        if (v >= max) {
          nameElement.classList.add('max-xp');
          nameElement.style.transform = 'scale(1.05)';
        }
      }
      
      container.classList.remove('max-xp', 'almost-max');
      
      if (v >= max) {
        container.classList.add('max-xp');
        
        if (Math.round(v) == max && window.confetti) {
          const confettiSettings = { 
            particleCount: 150,
            spread: 80,
            origin: { y: 0.6 },
            colors: ['#FFD700', '#FFA500', '#FF4500', '#FF00FF']
          };
          window.confetti(confettiSettings);
        }
      } else if (v >= 350 && v < max) {
        container.classList.add('almost-max');
      }
    }

    function toggleTasksList() {
      const tasksArea = document.querySelector('.tasks');
      if (tasksArea) {
        tasksArea.classList.toggle('visible');
      }
    }

    const insightsContainer = document.querySelector('.insights');
    if (insightsContainer) {
      insightsContainer.style.cursor = 'pointer';
      insightsContainer.addEventListener('click', toggleTasksList);
    }

    function setupThemeToggle(toggle) {
      if (!toggle) return;

      toggle.removeEventListener('change', toggleThemeHandler);
      toggle.removeEventListener('touchstart', handleTouchHandler);

      function toggleThemeHandler() {
        isDark = toggle.checked;
        document.body.classList.toggle('dark-mode', isDark);
        if(toggle === toggleExercise && toggle) toggle.checked = isDark;
        if(toggle === toggle && toggleExercise) toggleExercise.checked = isDark;
        save();
      }

      function handleTouchHandler(e) {
        e.preventDefault();
        toggle.checked = !toggle.checked;
        toggleThemeHandler();
      }

      toggle.addEventListener('change', toggleThemeHandler);
      toggle.addEventListener('touchstart', handleTouchHandler, {passive: false});
    }

    setupThemeToggle(document.getElementById('theme-toggle'));
    setupThemeToggle(document.getElementById('theme-toggle-exercise'));

    // Melhorando o suporte a toque para o botão limpar
    resetBtn.addEventListener('touchstart', function(e) {
      e.preventDefault();
      e.stopPropagation();
      this.onclick(e);
    }, { passive: false });

    // Melhorando o suporte a toque para o card de saudação
    const greetingEl = document.querySelector('.insights');
    if (greetingEl) {
      function handleGreetingTouch(e) {
        e.preventDefault();
        e.stopPropagation();
        toggleTasksList();
      }
      
      greetingEl.addEventListener('touchstart', handleGreetingTouch, { passive: false });
      greetingEl.addEventListener('touchend', (e) => {
        e.preventDefault();
        e.stopPropagation();
      }, { passive: false });
    }

    // Melhorando o suporte a toque para o toggle de tema
    const themeToggles = document.querySelectorAll('.tgl + .tgl-btn');
    themeToggles.forEach(toggle => {
      toggle.addEventListener('touchstart', function(e) {
        e.preventDefault();
        e.stopPropagation();
        const input = this.previousElementSibling;
        input.click();
      }, { passive: false });
      
      toggle.addEventListener('touchend', (e) => {
        e.preventDefault();
        e.stopPropagation();
      }, { passive: false });
    });
  </script>

  <!-- Script do Cloudflare -->
  <script>
    (function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'93a3d13baaba1d72',t:'MTc0NjMxNzg2OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();
  </script>
  <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'93aa9c0d4d964535',t:'MTc0NjM4OTA5MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>